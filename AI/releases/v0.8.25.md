# TestMe v0.8.25 Release Notes

Released: October 29, 2025

## Bug Fixes

### Service Script Output Handling

Fixed several issues with service script output handling to prevent test output contamination and improve debugging:

**Setup Service Output Isolation:**
- Setup service stdout/stderr is now piped to prevent it appearing after test results
- Added proper process exit waiting to ensure all output is captured before cleanup
- Service output no longer intermingles with test output in verbose mode

**Service Script Error Reporting:**
- Both stdout and stderr now displayed from failing service scripts for better debugging
- Service script output properly captured in non-verbose mode for error reporting
- Error messages now formatted on new line for better readability

**Windows PATH Environment Variable:**
- Fixed Windows PATH environment variable inheritance in setup scripts
- Setup scripts now correctly receive expanded PATH variables from configuration

**Error Message Improvements:**
- Setup service error messages now include relative path to script for easier identification
- Error output formatting improved for clarity

## Environment Variable Exports

Enhanced environment variable exports to service scripts for better test configuration:

**New Exports:**
- `TESTME_VERBOSE` - Always exported ('0' or '1'), previously only set when true
- `TESTME_QUIET` - Always exported ('0' or '1')
- `TESTME_KEEP` - Always exported ('0' or '1')

Service scripts can now reliably check these flags regardless of whether they're set or not.

## Configuration

### Health Check Field Name Support

Added backward compatibility for health check configuration field names:

**Problem:**
Code expected `healthCheck` (camelCase) but some configurations used `healthcheck` or `health`, causing health checks to be ignored and tests to run before services were ready.

**Solution:**
Now accepts all three variants for backward compatibility:
- `healthCheck` (camelCase - preferred/documented)
- `healthcheck` (lowercase - legacy)
- `health` (short form - convenient)

Health checks now work regardless of which naming convention was used in configuration files.

### Windows Process Stability

**stdin Pipe Handling:**
- Added `stdin: "pipe"` to `Bun.spawn()` on Windows to prevent processes from hanging
- Fixes timeout issues with Go tests and other subprocess operations on Windows

## Documentation

Updated project documentation structure:

**AI Directory Refactoring:**
- Moved AI documentation to standardized structure
- Removed vendored EJS templates
- Improved documentation organization for better maintainability

## Files Changed

- [src/services.ts](../../src/services.ts) - Service output handling, environment exports, health check compatibility
- [src/handlers/base.ts](../../src/handlers/base.ts) - Windows stdin pipe handling, environment variable exports
- [src/platform/process.ts](../../src/platform/process.ts) - Process management improvements
- [package.json](../../package.json) - Version bump to 0.8.25
- [src/version.ts](../../src/version.ts) - Version bump to 0.8.25

## Upgrade Notes

This release is fully backward compatible. Health check configurations using any of the three field name variants (`healthCheck`, `healthcheck`, `health`) will work correctly.

Service scripts will now receive properly formatted boolean environment variables that can be reliably checked regardless of whether flags are set or not.
